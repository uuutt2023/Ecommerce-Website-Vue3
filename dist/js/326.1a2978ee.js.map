{"version":3,"file":"js/326.1a2978ee.js","mappings":"2HAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,ylBCKjB,MAAMI,EAAWA,IAAMC,EAAAA,EAAOC,O,4ZCR9B,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,2+CCCA,IAAIC,GAASC,EAAAA,EAAAA,IAAI,CAEfC,GAAI,MACJC,MAAO,KACPC,YAAa,KAEbC,KAAM,KACNC,UAAW,KACXC,OAAQ,OACRC,MAAO,KAEPC,cAAe,CAAC,QAChBC,IAAK,QACLC,MAAO,OACPC,OAAQ,SAIV,MAAMC,GAASZ,EAAAA,EAAAA,IAAI,KACnBa,EAAAA,EAAAA,KAASC,gBAEDC,IACNH,EAAOI,MAAQ,CAACjB,EAAOiB,MAAMP,cAAeQ,EAAAA,EAAMC,IAAI,gCAAgCC,KAAK,IAG7F,MAAMJ,EAAYD,SACff,EAAOiB,aAAeC,EAAAA,EAAMC,IAAI,kBAAkBE,SAASC,WAAWF,KAGnEG,GAAUtB,EAAAA,EAAAA,IAAI,MAEdH,GAAOG,EAAAA,EAAAA,IAAI,MAEjBc,eAAeS,IACb,IAAIC,EAAAA,EAAAA,QAAOF,EAAQN,OACjB,OAAO,EAETjB,EAAOiB,aACCC,EAAAA,EAAMQ,KAAK,mBAAoB,CACnCxB,GAAIF,EAAOiB,MAAMf,GACjBG,KAAMsB,EAAAA,EAAMC,MAAMC,KAAKxB,KACvBkB,QAASA,EAAQN,MACjBa,OAAQH,EAAAA,EAAMI,QAAQC,qBAExBZ,KACFG,EAAQN,MAAQ,WACVH,EAAAA,EAAAA,KAAS,IAAMhB,EAAKmB,MAAMgB,eAAe,CAAEC,SAAU,YAC7D,C,qgEClDA,MAAMnC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue3-data-pulse/./node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js","webpack://vue3-data-pulse/./src/components/TopBar.vue","webpack://vue3-data-pulse/./src/components/TopBar.vue?4f82","webpack://vue3-data-pulse/./src/views/user/components/DetailHome.vue","webpack://vue3-data-pulse/./src/views/user/components/DetailHome.vue?023f"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<script setup>\r\nimport router from '@/router';\r\n\r\ndefineProps({\r\n  canBack: {\r\n    type: Boolean,\r\n    default: () => true,\r\n  },\r\n  title: {\r\n    type: String,\r\n    default: () => '',\r\n  },\r\n});\r\n\r\nconst jumpBack = () => router.back();\r\n</script>\r\n\r\n<template>\r\n  <div class=\"shadow-sm\">\r\n    <header class=\"row d-flex flex-column px-4\">\r\n      <div\r\n        id=\"bar\"\r\n        class=\"col-12\">\r\n        <div class=\"col-1 p-0\">\r\n          <i\r\n            v-if=\"canBack\"\r\n            class=\"iconfont icon-back\"\r\n            @click=\"jumpBack\" />\r\n        </div>\r\n        <div\r\n          id=\"topBar-title\"\r\n          class=\"col-auto p-0\">\r\n          <h5 class=\"m-0 text-center\">{{ title.length > 0 ? title : $route.meta?.title }}</h5>\r\n        </div>\r\n        <div class=\"col-auto p-0 d-inline-flex justify-content-end\">\r\n          <slot name=\"right\" />\r\n        </div>\r\n      </div>\r\n      <div\r\n        id=\"topBar-section\"\r\n        class=\"col-12 p-0\">\r\n        <slot name=\"section\" />\r\n      </div>\r\n    </header>\r\n    <hr class=\"mb-0 mt-1\" />\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n#bar {\r\n  height: 56px;\r\n  position: sticky;\r\n  top: 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\nheader {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n#topBar-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n#topBar-title {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n\r\n.iconfont {\r\n  font-size: 26px;\r\n}\r\n\r\n.shadow-sm {\r\n  z-index: 2;\r\n}\r\n</style>\r\n","import script from \"./TopBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TopBar.vue?vue&type=style&index=0&id=32ecd6f6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-32ecd6f6\"]])\n\nexport default __exports__","<script setup>\r\nimport { nextTick, ref } from 'vue';\r\nimport { checkValueInterpolation, toggleFavorite } from '@/assets/js/util';\r\nimport TopBar from '@/components/TopBar.vue';\r\nimport { isNull, isObject } from 'lodash';\r\nimport store from '@/store/store';\r\nimport axios from 'axios';\r\n\r\n// 详情页数据\r\nlet detail = ref({\r\n  // 详情页基本数据\r\n  id: 'xxx',\r\n  title: '标题',\r\n  description: '简介',\r\n  // 猫咪基本数据\r\n  name: '小黑',\r\n  fur_color: '毛色',\r\n  animal: '动物类别',\r\n  breed: '品种',\r\n  // 其他\r\n  user_messages: ['用户留言'],\r\n  url: '图片URL',\r\n  width: '图片宽度',\r\n  height: '图片高度',\r\n});\r\n\r\n// 轮播图数据\r\nconst imgUrl = ref([]);\r\nnextTick(async () => {\r\n  // 请求后端获取数据\r\n  await getDetail();\r\n  imgUrl.value = [detail.value.url, ...(await axios.get('/api/random/img/cat?count=4')).data];\r\n});\r\n\r\nconst getDetail = async () =>\r\n  (detail.value = (await axios.get(`/api/detail/cat${location.search}`)).data);\r\n\r\n// 发布评论\r\nconst comment = ref(null);\r\n// 最底部元素\r\nconst back = ref(null);\r\n\r\nasync function sendComment() {\r\n  if (isNull(comment.value)) {\r\n    return false;\r\n  }\r\n  detail.value = (\r\n    await axios.post(`/api/add/comment`, {\r\n      id: detail.value.id,\r\n      name: store.state.user.name,\r\n      comment: comment.value,\r\n      avatar: store.getters.currentUserAvatar,\r\n    })\r\n  ).data;\r\n  comment.value = null;\r\n  await nextTick(() => back.value.scrollIntoView({ behavior: 'smooth' }));\r\n}\r\n</script>\r\n\r\n<template>\r\n  <!-- 顶部栏 -->\r\n  <TopBar />\r\n  <div class=\"container-fluid p-0\">\r\n    <div class=\"scroll py-3\">\r\n      <header class=\"px-3 pb-0 border-bottom mb-4\">\r\n        <!-- 顶部轮播图 -->\r\n        <div\r\n          v-if=\"imgUrl && imgUrl.length > 0\"\r\n          id=\"cat-img\"\r\n          class=\"carousel slide border border-2 overflow-hidden rounded-3\"\r\n          data-bs-interval=\"3000\"\r\n          data-bs-slide=\"true\"\r\n          data-bs-ride=\"carousel\">\r\n          <!-- 指示符 -->\r\n          <div class=\"carousel-indicators\">\r\n            <button\r\n              v-for=\"index in imgUrl.length\"\r\n              :key=\"index\"\r\n              :class=\"{ active: --index === 0 }\"\r\n              :data-bs-slide-to=\"index\"\r\n              data-bs-target=\"#cat-img\"\r\n              type=\"button\" />\r\n          </div>\r\n\r\n          <!-- 轮播图片 -->\r\n          <div class=\"carousel-inner w-100\">\r\n            <div\r\n              v-for=\"(img, index) in imgUrl\"\r\n              :key=\"index\"\r\n              :class=\"{ active: index === 0 }\"\r\n              class=\"carousel-item\">\r\n              <img\r\n                :src=\"img\"\r\n                alt=\"轮播图{{index}}\"\r\n                class=\"d-block w-100\" />\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 左右切换按钮 -->\r\n          <button\r\n            class=\"carousel-control-prev\"\r\n            data-bs-slide=\"prev\"\r\n            data-bs-target=\"#cat-img\"\r\n            type=\"button\">\r\n            <span class=\"carousel-control-prev-icon\"></span>\r\n          </button>\r\n          <button\r\n            class=\"carousel-control-next\"\r\n            data-bs-slide=\"next\"\r\n            data-bs-target=\"#cat-img\"\r\n            type=\"button\">\r\n            <span class=\"carousel-control-next-icon\"></span>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- 作者分享文案 -->\r\n        <div class=\"mt-4\">\r\n          <h4 class=\"fw-bold\">{{ detail.title }}</h4>\r\n          <p class=\"lh-lg\">\r\n            {{ detail.description }}\r\n            <small class=\"d-block text-end\">12-07 上海</small>\r\n          </p>\r\n        </div>\r\n      </header>\r\n\r\n      <section>\r\n        <h5 class=\"d-block ps-3\">共{{ detail.user_messages.length }}条评论</h5>\r\n        <article\r\n          v-for=\"(item, index) in detail.user_messages\"\r\n          :key=\"index\"\r\n          class=\"my-4 px-3 pb-4 d-flex align-items-start border-1 border-bottom\">\r\n          <img\r\n            :src=\"isObject(item) ? item?.avatar : `https://picsum.photos/48?${index}`\"\r\n            alt=\"tx\"\r\n            class=\"col-2 rounded-circle flex-shrink-0\" />\r\n\r\n          <div class=\"flex-grow-1 ms-3\">\r\n            <p>\r\n              {{ isObject(item) ? item?.name : '测试用户' }}\r\n              <small class=\"d-block text-secondary\">n个小时前 - IP属地：天津</small>\r\n            </p>\r\n            <p class=\"lh-sm mb-4\">{{ isObject(item) ? item.comment : item }}</p>\r\n          </div>\r\n        </article>\r\n      </section>\r\n\r\n      <span ref=\"back\"></span>\r\n\r\n      <footer\r\n        class=\"fixed-bottom bg-light border-top border-secondary row align-items-center py-2 px-2 shadow-lg\">\r\n        <form\r\n          @submit.prevent=\"sendComment\"\r\n          class=\"input-group align-items-center\">\r\n          <input\r\n            v-model=\"comment\"\r\n            aria-describedby=\"btn-sendComment\"\r\n            class=\"form-control col py-2 rounded-start-5 border-0\"\r\n            placeholder=\"不发没关系，请继续友善哦~\"\r\n            type=\"text\" />\r\n          <button\r\n            type=\"submit\"\r\n            class=\"btn btn-outline-primary rounded-end-5 px-3\"\r\n            id=\"btn-sendComment\">\r\n            发送\r\n          </button>\r\n          <i\r\n            @click=\"toggleFavorite(detail)\"\r\n            :class=\"checkValueInterpolation(detail) ? 'icon-like-fill' : 'icon-like'\"\r\n            class=\"iconfont col-1 p-0 ps-2 text-center\" />\r\n        </form>\r\n      </footer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.carousel-inner {\r\n  $h: 400px;\r\n  height: $h;\r\n\r\n  img {\r\n    object-fit: cover;\r\n    object-position: center;\r\n    height: $h;\r\n  }\r\n}\r\n\r\nfooter {\r\n  //height: 56px;\r\n}\r\n\r\nheader,\r\narticle,\r\nfooter {\r\n  border-color: #cccccc !important;\r\n}\r\n\r\n.icon-like-fill {\r\n  color: #ff671c !important;\r\n}\r\n</style>\r\n","import script from \"./DetailHome.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DetailHome.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DetailHome.vue?vue&type=style&index=0&id=7c1d0aba&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c1d0aba\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","jumpBack","router","back","__exports__","detail","ref","id","title","description","name","fur_color","animal","breed","user_messages","url","width","height","imgUrl","nextTick","async","getDetail","value","axios","get","data","location","search","comment","sendComment","isNull","post","store","state","user","avatar","getters","currentUserAvatar","scrollIntoView","behavior"],"sourceRoot":""}