{"version":3,"file":"js/700.92b56a0b.js","mappings":"2HAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,sGCNV,MAAMI,EAAc,aAQdC,EAA0BA,KACrCC,OAAOC,iBAAiB,gBAAgB,KAEtC,MAAMC,GAAOC,EAAAA,EAAAA,MAAKC,EAAAA,EAAMC,MAAO,CAAC,gBAAiB,SAEjDC,aAAaC,QAAQ,GAAGT,SAAoBU,KAAKC,UAAUP,GAAM,KAG5DQ,EAAAA,EAAAA,WAAS,KAEd,MAAMC,EAAYL,aAAaM,QAAQ,GAAGd,UAC1Ca,GAAaP,EAAAA,EAAMS,OAAO,gBAAiBL,KAAKM,MAAMH,GAAW,GAChE,IAJID,G,+MCdT,MAAMK,EAAU,CAAC,iBAAkB,iBAAkB,iBAAkB,WACjEC,GAAWC,EAAAA,EAAAA,IAAIb,EAAAA,EAAMC,MAAMW,UAE3BE,EAAU,CACd,EAAG,aACH,EAAG,mBACH,EAAG,kBACH,EAAG,iBAGL,SAASC,EAAWC,GAClBJ,EAASK,MAAQD,EACjBE,EAAAA,EAAOC,KAAKL,EAAQE,GACtB,C,OAGAE,EAAAA,EAAOE,YAAW,CAACC,EAAIC,EAAOC,KAExBF,EAAGG,KAAKC,cACVzB,EAAAA,EAAMS,OAAO,cAAeG,EAASK,OAGvC,MAAMS,GAAeL,EAAGG,KAAKZ,SACzBc,GAAe,IACjBd,EAASK,MAAQS,GAEnBH,GAAM,I,sPCzBR,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,6BCDA,MAAMC,GAASC,EAAAA,EAAAA,K,OACfD,EAAOE,UAAU,GAAGpC,EAAAA,EAAYqC,2BAA4B/B,EAAAA,EAAMC,MAAM+B,M,6VCHxE,MAAM,EAAc,EAEpB,O","sources":["webpack://vue3-data-pulse/./node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js","webpack://vue3-data-pulse/./src/assets/js/local.js","webpack://vue3-data-pulse/./src/components/BottomBar.vue","webpack://vue3-data-pulse/./src/components/BottomBar.vue?4293","webpack://vue3-data-pulse/./src/views/user/WebUser.vue","webpack://vue3-data-pulse/./src/views/user/WebUser.vue?a201"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import store from '@/store/store';\r\nimport { pick, throttle } from 'lodash';\r\n\r\nexport const prefixLocal = 'WEBAPP-CAT';\r\n\r\n/**\r\n * 实现Vuex的永久性保存\r\n * 1. 关闭网页时，将Vuex数据存储进浏览器里\r\n * 2. 启动Vue时，读取相关数据并写入Vuex中\r\n * @return {Function} 节流函数\r\n * */\r\nexport const vuexDataSaveIntoBrowser = () => {\r\n  window.addEventListener('beforeunload', () => {\r\n    // 保存数据到本地\r\n    const data = pick(store.state, ['userFavorites', 'user']);\r\n    // 将 Vuex 的数据保存到 localStorage\r\n    localStorage.setItem(`${prefixLocal}-DATA`, JSON.stringify(data));\r\n  });\r\n\r\n  return throttle(() => {\r\n    // 从浏览器中获取保存的字符串数据\r\n    const savedData = localStorage.getItem(`${prefixLocal}-DATA`);\r\n    savedData && store.commit('loadLocalData', JSON.parse(savedData));\r\n  }, 5000)();\r\n};\r\n","<script setup>\r\nimport { ref } from 'vue';\r\nimport router from '@/router';\r\nimport store from '@/store/store';\r\n\r\nconst listBtn = ['icon-home-fill', 'icon-more-fill', 'icon-like-fill', 'icon-me'];\r\nconst tabState = ref(store.state.tabState);\r\n\r\nconst jumpMap = {\r\n  0: '/user/home',\r\n  1: '/user/categories',\r\n  2: '/user/favorites',\r\n  3: '/user/profile',\r\n};\r\n\r\nfunction jumpToPage(index) {\r\n  tabState.value = index;\r\n  router.push(jumpMap[index]);\r\n}\r\n\r\n// 在导航守卫中保存和恢复标签栏的状态\r\nrouter.beforeEach((to, _from, next) => {\r\n  // 保存标签栏的状态到Vuex中\r\n  if (to.meta.saveTabState) {\r\n    store.commit('setTabState', tabState.value);\r\n  }\r\n  // 标签切换时，同步标签栏状态\r\n  const beforeState = +to.meta.tabState;\r\n  if (beforeState >= 0) {\r\n    tabState.value = beforeState;\r\n  }\r\n  next();\r\n});\r\n</script>\r\n\r\n<template>\r\n  <KeepAlive>\r\n    <nav>\r\n      <i\r\n        v-for=\"(item, index) in listBtn\"\r\n        :key=\"index\"\r\n        :class=\"`iconfont ${item} ${tabState === index ? 'active' : ''}`\"\r\n        @click=\"jumpToPage(index)\" />\r\n    </nav>\r\n  </KeepAlive>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n@use '~@/assets/scss/utils';\r\n\r\nnav {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  align-items: stretch;\r\n  justify-content: space-around;\r\n  border-top: 1px solid #d0d0d0;\r\n}\r\n\r\n.iconfont {\r\n  color: #d0d0d0;\r\n  width: 48px;\r\n  aspect-ratio: 1 / 1;\r\n  @extend %flex-center;\r\n  font-size: 32px;\r\n\r\n  &.active {\r\n    color: #2967ff;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./BottomBar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BottomBar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BottomBar.vue?vue&type=style&index=0&id=4cc73e71&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.4.38_vue@3.4.38_webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4cc73e71\"]])\n\nexport default __exports__","<script setup>\r\nimport { prefixLocal } from '@/assets/js/local';\r\nimport store from '@/store/store';\r\nimport { useCookie } from 'vue-cookie-next';\r\nimport BottomBar from '@/components/BottomBar.vue';\r\n\r\n// 自动登录 Cookie验证\r\nconst cookie = useCookie();\r\ncookie.setCookie(`${prefixLocal.toLocaleLowerCase()}-user`, store.state.user);\r\n</script>\r\n\r\n<template>\r\n  <main>\r\n    <router-view v-slot=\"{ Component }\">\r\n      <keep-alive :include=\"['UserHome', 'UserCategories']\">\r\n        <component :is=\"Component\" />\r\n      </keep-alive>\r\n    </router-view>\r\n    <BottomBar\r\n      v-if=\"!$route.meta.noBottomBar\"\r\n      class=\"bottomNav\" />\r\n  </main>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n@use '~@/assets/scss/utils';\r\n\r\nmain {\r\n  height: 100%;\r\n  @extend %flex-column;\r\n  justify-content: space-between;\r\n}\r\n\r\n.iconfont {\r\n  font-size: 22px;\r\n}\r\n\r\n.container-fluid {\r\n  flex-grow: 1;\r\n  @extend %none-scrollBar;\r\n  scroll-snap-type: y mandatory;\r\n\r\n  .scroll {\r\n    scroll-snap-align: start;\r\n  }\r\n\r\n  &:after,\r\n  &:before {\r\n    content: '';\r\n    display: block;\r\n    height: 5vh; /* 调整额外滑动区域的高度 */\r\n  }\r\n}\r\n\r\n.bottomNav {\r\n  height: 64px !important;\r\n}\r\n</style>\r\n","import script from \"./WebUser.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WebUser.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WebUser.vue?vue&type=style&index=0&id=a061999a&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","prefixLocal","vuexDataSaveIntoBrowser","window","addEventListener","data","pick","store","state","localStorage","setItem","JSON","stringify","throttle","savedData","getItem","commit","parse","listBtn","tabState","ref","jumpMap","jumpToPage","index","value","router","push","beforeEach","to","_from","next","meta","saveTabState","beforeState","__exports__","cookie","useCookie","setCookie","toLocaleLowerCase","user"],"sourceRoot":""}